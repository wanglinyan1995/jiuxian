"use strict";$(function(){$(".goodsList li").hover(function(){$(".submenu").eq($(this).index()).addClass("subShow")},function(){$(".submenu").eq($(this).index()).removeClass("subShow")}),$(".submenu").hover(function(){$(this).addClass("subShow"),$(".goodsList li").eq($(this).index()-2).addClass("lion")},function(){$(this).removeClass("subShow"),$(".goodsList li").eq($(this).index()-2).removeClass("lion")}),$(".page-goodsList .nav-heading").hover(function(){$(".page-goodsList .goodsList").show()}),$(".page-goodsList .navmenu").mouseleave(function(){$(".page-goodsList .goodsList").hide()});var d="../api/goodslist.php",s=$(".proList ul"),c=$(".pageCode");function r(t){var a=t.map(function(t){return'<li data-id="'+t.id+'">\n\t\t\t\t\t\t<div class="dataitem">\n\t\t\t\t\t\t\t<a href="###" class="thumb">\n\t\t\t\t\t\t\t\t<img src="'+t.url03+'" alt="">\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<div class="price">\n\t\t\t\t\t\t\t\t￥<span>'+t.nowprice+'</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a href="" class="title">\n\t\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t\t\t'+t.name+'\n\t\t\t\t\t\t\t\t<span>经典酒鬼酒 人生馥郁香</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<div class="assess">\n\t\t\t\t\t\t\t\t<span>1111</span>评价\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="activity clearfix">\n\t\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t\t\t<span>限时抢购</span>\n\t\t\t\t\t\t\t\t<span>订单加价抢购</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="buyArea clearfix">\n\t\t\t\t\t\t\t\t<div class="edit">\n\t\t\t\t\t\t\t\t\t<span class="add buyNum-reduce">-</span>\n\t\t\t\t\t\t\t\t\t<input type="text" value="1" class="letter">\n\t\t\t\t\t\t\t\t\t<span class="reduce buyNum-add">+</span>\n\t\t\t\t\t\t\t\t\t<span class=\'total\' style="display:none">'+t.num+' </span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<a href="###" class="cart buyBtn-cart">\n\t\t\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t\t\t\t<span class="buyBtn buyBtn-cart">加入购物车</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>'}).join("");s.html(a)}function p(){s.children("li").on("click",function(){var t="id="+$(this).attr("data-id");location.href="goodsDetails.html?"+t})}$.ajax({type:"post",url:d,data:"page=1&qty=5",success:function(t){var a=JSON.parse(t);r(a.list),p();for(var s=a.total,n=a.qty,e=Math.ceil(s/n),i="",o=0;o<e;o++)i+='<a href="###" class="numpage">'+(o+1)+"</a>";$(".allPage").html(e),c.html(i),c.children("a").eq(0).addClass("on"),c.children("a").on("click",function(){var t=this.innerHTML;$(this).addClass("on").siblings().removeClass("on");var a="qty=5&page="+t;$.ajax({type:"post",url:d,data:a,success:function(t){r(JSON.parse(t).list),p()}})}),$(".prevpage").click(function(){var t=$(".pageCode").find(".on").index()-1;t<0&&(t=0),$(".pageCode").children("a").eq(t).addClass("on").siblings().removeClass("on");var a=t;++a<0&&(a=0);var s="qty=5&page="+a;$.ajax({type:"post",url:d,data:s,success:function(t){r(JSON.parse(t).list),p()}})}),$(".nextpage").click(function(){var t=$(".pageCode").find(".on").index()+1;$(".pageCode").children("a").eq(t).addClass("on").siblings().removeClass("on");var a=t+1,s=$(".pageCode").children("a").size();s<=a&&(a=s);var n="qty=5&page="+a;$.ajax({type:"post",url:d,data:n,success:function(t){r(JSON.parse(t).list),p()}})});var l=!0;$(".jg").click(function(){$.ajax({type:"post",url:"../api/sort.php",data:"page=1&qty=5&istrue="+l,success:function(t){var a=JSON.parse(t);r(a.list),p();for(var s=a.total,n=a.qty,e=Math.ceil(s/n),i="",o=0;o<e;o++)i+='<a href="###" class="numpage">'+(o+1)+"</a>";$(".allPage").html(e),c.html(i),c.children("a").eq(0).addClass("on"),c.children("a").on("click",function(){var t=this.innerHTML;$(this).addClass("on").siblings().removeClass("on");var a="qty=5&page="+t;$.ajax({type:"post",url:"../api/sort.php",data:a,success:function(t){r(JSON.parse(t).list),p()}})}),$(".prevpage").click(function(){var t=$(".pageCode").find(".on").index();t<0&&(t=0),$(".pageCode").children("a").eq(t).addClass("on").siblings().removeClass("on");var a=t;++a<0&&(a=0);var s="qty=5&page="+a;$.ajax({type:"post",url:"../api/sort.php",data:s,success:function(t){r(JSON.parse(t).list),p()}})}),$(".nextpage").click(function(){var t=$(".pageCode").find(".on").index();$(".pageCode").children("a").eq(t).addClass("on").siblings().removeClass("on");var a=t+1,s=$(".pageCode").children("a").size();s<=a&&(a=s);var n="qty=5&page="+a;$.ajax({type:"post",url:"../api/sort.php",data:n,success:function(t){r(JSON.parse(t).list),p()}})}),l=!l}})})}})});